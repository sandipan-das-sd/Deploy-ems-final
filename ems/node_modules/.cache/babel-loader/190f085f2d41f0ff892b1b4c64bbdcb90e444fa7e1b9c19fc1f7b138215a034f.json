{"ast":null,"code":"import React,{useState}from\"react\";import{Link,useHistory}from\"react-router-dom\";import styles from\"./styles.module.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Signup=()=>{const[data,setData]=useState({firstname:\"\",lastname:\"\",email:\"\",password:\"\",confirmPassword:\"\",userType:\"user\",secretKey:\"\"});const[error,setError]=useState(\"\");const history=useHistory();const handleSubmit=async e=>{e.preventDefault();// Password validation, additional validations can be added\nif(data.password!==data.confirmPassword){setError(\"Passwords do not match\");return;}if(data.userType===\"admin\"){const secretKey=\"ems-ardent@2024\";if(data.secretKey!==secretKey){setError(\"Secret key does not match\");return;}}axios.defaults.withCredentials=true;try{// Include userType in the data object sent to the backend\nconst response=await axios.post('https://ems-server-theta.vercel.app/register',data);console.log(response.data);alert(\"Registered successfully\");history.push('/login');}catch(error){console.error(\"Error:\",error.message);setError(\"Registration failed. Please try again.\");}};const handleChange=e=>{// If the name of the input field is \"userType\", update userType in the state\nif(e.target.name===\"userType\"){setData({...data,userType:e.target.value});}else{// For other input fields, update the state normally\nsetData({...data,[e.target.name]:e.target.value});}};return/*#__PURE__*/_jsx(\"div\",{className:styles.signup_container,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.signup_form_container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.left,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Back\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:styles.white_btn,children:\"Sign in\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.right,children:[/*#__PURE__*/_jsxs(\"form\",{className:styles.form_container,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create Account\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"First Name\",name:\"firstname\",onChange:handleChange,value:data.firstname,required:true,className:styles.input}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Last Name\",name:\"lastname\",onChange:handleChange,value:data.lastname,required:true,className:styles.input}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",name:\"email\",onChange:handleChange,value:data.email,required:true,className:styles.input}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",name:\"password\",onChange:handleChange,value:data.password,required:true,className:styles.input}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirm Password\",name:\"confirmPassword\",onChange:handleChange,value:data.confirmPassword,required:true,className:styles.input}),/*#__PURE__*/_jsxs(\"select\",{name:\"userType\",value:data.userType,onChange:handleChange,className:styles.input,children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]}),data.userType===\"admin\"&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Secret Key\",name:\"secretKey\",onChange:handleChange,value:data.secretKey,required:true,className:styles.input}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles.green_btn,children:\"Sign Up\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:error})]})]})});};export default Signup;","map":{"version":3,"names":["React","useState","Link","useHistory","styles","axios","jsx","_jsx","jsxs","_jsxs","Signup","data","setData","firstname","lastname","email","password","confirmPassword","userType","secretKey","error","setError","history","handleSubmit","e","preventDefault","defaults","withCredentials","response","post","console","log","alert","push","message","handleChange","target","name","value","className","signup_container","children","signup_form_container","left","to","type","white_btn","right","form_container","onSubmit","placeholder","onChange","required","input","green_btn"],"sources":["E:/Deploy ems/ems/src/components/Signup/Signup.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport styles from \"./styles.module.css\";\r\nimport axios from \"axios\";\r\n\r\nconst Signup = () => {\r\n    const [data, setData] = useState({\r\n        firstname: \"\",\r\n        lastname: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        confirmPassword: \"\",\r\n        userType: \"user\",\r\n        secretKey: \"\", \r\n    });\r\n    const [error, setError] = useState(\"\");\r\n    const history = useHistory();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        // Password validation, additional validations can be added\r\n        if (data.password !== data.confirmPassword) {\r\n            setError(\"Passwords do not match\");\r\n            return;\r\n        }\r\n\r\n        \r\n        if (data.userType === \"admin\") {\r\n            const secretKey = \"ems-ardent@2024\";\r\n            if (data.secretKey !== secretKey) {\r\n                setError(\"Secret key does not match\");\r\n                return;\r\n            }\r\n        }\r\n\r\n        axios.defaults.withCredentials=true;\r\n        try {\r\n            // Include userType in the data object sent to the backend\r\n            const response = await axios.post('https://ems-server-theta.vercel.app/register', data);\r\n            console.log(response.data);\r\n            alert(\"Registered successfully\");\r\n            history.push('/login');\r\n        } catch (error) {\r\n            console.error(\"Error:\", error.message);\r\n            setError(\"Registration failed. Please try again.\");\r\n        }\r\n    };\r\n    \r\n    const handleChange = (e) => {\r\n        // If the name of the input field is \"userType\", update userType in the state\r\n        if (e.target.name === \"userType\") {\r\n            setData({ ...data, userType: e.target.value });\r\n        } else {\r\n            // For other input fields, update the state normally\r\n            setData({ ...data, [e.target.name]: e.target.value });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={styles.signup_container}>\r\n            <div className={styles.signup_form_container}>\r\n                <div className={styles.left}>\r\n                    <h1>Welcome Back</h1>\r\n                    <Link to=\"/login\">\r\n                        <button type=\"button\" className={styles.white_btn}>\r\n                            Sign in\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n                <div className={styles.right}>\r\n                    <form className={styles.form_container} onSubmit={handleSubmit}>\r\n                        <h1>Create Account</h1>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"First Name\"\r\n                            name=\"firstname\"\r\n                            onChange={handleChange}\r\n                            value={data.firstname}\r\n                            required\r\n                            className={styles.input}\r\n                        />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Last Name\"\r\n                            name=\"lastname\"\r\n                            onChange={handleChange}\r\n                            value={data.lastname}\r\n                            required\r\n                            className={styles.input}\r\n                        />\r\n                        <input\r\n                            type=\"email\"\r\n                            placeholder=\"Email\"\r\n                            name=\"email\"\r\n                            onChange={handleChange}\r\n                            value={data.email}\r\n                            required\r\n                            className={styles.input}\r\n                        />\r\n                        <input\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                            name=\"password\"\r\n                            onChange={handleChange}\r\n                            value={data.password}\r\n                            required\r\n                            className={styles.input}\r\n                        />\r\n                        <input\r\n                            type=\"password\"\r\n                            placeholder=\"Confirm Password\"\r\n                            name=\"confirmPassword\"\r\n                            onChange={handleChange}\r\n                            value={data.confirmPassword}\r\n                            required\r\n                            className={styles.input}\r\n                        />\r\n                        <select\r\n                            name=\"userType\"\r\n                            value={data.userType}\r\n                            onChange={handleChange}\r\n                            className={styles.input}\r\n                        >\r\n                            <option value=\"user\">User</option>\r\n                            <option value=\"admin\">Admin</option>\r\n                        </select>\r\n                        {data.userType === \"admin\" && (\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Enter Secret Key\"\r\n                                name=\"secretKey\"\r\n                                onChange={handleChange}\r\n                                value={data.secretKey}\r\n                                required\r\n                                className={styles.input}\r\n                            />\r\n                        )}\r\n                        <button type=\"submit\" className={styles.green_btn}>\r\n                            Sign Up\r\n                        </button>\r\n                    </form>\r\n                    {error && <p className={styles.error}>{error}</p>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Signup;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}